---
import Heading from "./Heading.astro";
import Text from "./Text.astro";
---

<section class="bg-white py-10 md:px-0">
  <!-- Heading -->

  <div class="mx-auto max-w-6xl px-6 md:px-0 text-center">
    <Heading htmlheading="h2" size="medium" font="Lalezar">
      Følg os på sociale medier!</Heading
    >

    <Text teksttype="brødtekst"> @hojskolendk </Text>
  </div>

  <!-- MOBILE: autoplay marquee -->
  <div class="mt-2 overflow-hidden relative md:hidden">
    <div class="flex animate-[marquee_15s_linear_infinite]">
      <!-- #1 Billede -->
      <img src="img/somepic1.webp" class="h-80 w-auto object-cover" alt="" />

      <!-- #2 Video -->
      <video
        class="h-80"
        src="img/somevid1.mov"
        muted
        playsinline
        autoplay
        loop
        preload="metadata"></video>

      <!-- #3 Billede -->
      <img src="img/somepic2.webp" class="h-80 w-auto object-cover" alt="" />

      <!-- #4 Video -->
      <video
        class="h-80"
        src="img/somevid2.mov"
        muted
        playsinline
        autoplay
        loop
        preload="metadata"></video>

      <!-- #5 Billede -->
      <img src="img/somepic3.webp" class="h-80 w-auto object-cover" alt="" />

      <!-- Duplikat for sømløst loop -->
      <img src="img/somepic1.webp" class="h-80 w-auto object-cover" alt="" />
      <video
        class="h-80 w-auto object-cover"
        src="img/some1.mov"
        muted
        playsinline
        autoplay
        loop
        preload="metadata"></video>
      <img src="img/somepic2.webp" class="h-80 w-auto object-cover" alt="" />
      <video
        class="h-80 w-auto object-cover"
        src="img/some2.mov"
        muted
        playsinline
        autoplay
        loop
        preload="metadata"></video>
      <img src="img/somepic3.webp" class="h-80 w-auto object-cover" alt="" />
    </div>
  </div>

  <!-- DESKTOP: fuld bredde, statisk -->
  <div class="hidden md:block mt-10 w-full">
    <div class="grid grid-cols-5 w-full social-grid">
      <!-- #1 Billede - Instagram -->
      <a
        href="https://www.instagram.com/hojskolendk"
        target="_blank"
        class="group relative block social-item opacity-0"
        style="transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0ms;"
      >
        <img
          src="img/somepic1.webp"
          alt=""
          class="w-full h-[500px] object-cover"
        />
        <!-- Hover overlay -->
        <div
          class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center"
        >
          <img
            src="img/instaikon.webp"
            alt="Instagram"
            class="w-10 h-10 opacity-90"
          />
        </div>
      </a>

      <!-- #2 Video - TikTok -->
      <a
        href="https://www.tiktok.com/@hojskolendk"
        target="_blank"
        class="group relative block social-item opacity-0"
        style="transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 150ms;"
      >
        <video
          class="w-full h-[500px] object-cover"
          src="img/somevid1.mov"
          muted
          playsinline
          autoplay
          loop
          preload="metadata"></video>
        <!-- Hover overlay -->
        <div
          class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center"
        >
          <img
            src="img/tiktokikon.webp"
            alt="TikTok"
            class="w-10 h-10 opacity-90"
          />
        </div>
      </a>

      <!-- #3 Billede - Instagram -->
      <a
        href="https://www.instagram.com/hojskolendk"
        target="_blank"
        class="group relative block social-item opacity-0"
        style="transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 300ms;"
      >
        <img
          src="img/somepic2.webp"
          alt=""
          class="w-full h-[500px] object-cover"
        />
        <div
          class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center"
        >
          <img
            src="img/instaikon.webp"
            alt="Instagram"
            class="w-10 h-10 opacity-90"
          />
        </div>
      </a>

      <!-- #4 Video - TikTok -->
      <a
        href="https://www.tiktok.com/@hojskolendk"
        target="_blank"
        class="group relative block social-item opacity-0"
        style="transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 450ms;"
      >
        <video
          class="w-full h-[500px] object-cover"
          src="img/somevid2.mov"
          muted
          playsinline
          autoplay
          loop
          preload="metadata"></video>
        <div
          class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center"
        >
          <img
            src="img/tiktokikon.webp"
            alt="TikTok"
            class="w-10 h-10 opacity-90"
          />
        </div>
      </a>

      <!-- #5 Billede - Instagram -->
      <a
        href="https://www.instagram.com/hojskolendk"
        target="_blank"
        class="group relative block social-item opacity-0"
        style="transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 600ms;"
      >
        <img
          src="img/somepic3.webp"
          alt=""
          class="w-full h-[500px] object-cover"
        />
        <div
          class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center"
        >
          <img
            src="img/instaikon.webp"
            alt="Instagram"
            class="w-10 h-10 opacity-90"
          />
        </div>
      </a>
    </div>
  </div>
  <style>
    @keyframes marquee {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(-50%);
      }
    }

    .social-item.visible {
      opacity: 1 !important;
    }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const items = document.querySelectorAll(".social-item");
              items.forEach((item) => {
                item.classList.add("visible");
              });
              observer.disconnect();
            }
          });
        },
        { threshold: 0.2 }
      );

      const section = document.querySelector("#social");
      if (section) {
        observer.observe(section);
      }
    });
  </script>
</section>
